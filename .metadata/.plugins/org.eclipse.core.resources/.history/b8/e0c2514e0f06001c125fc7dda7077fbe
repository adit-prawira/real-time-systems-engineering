#include <stdio.h>
#include <stdlib.h>

enum states{
	State0,
	State1,
	State2,
	State3
};
enum states CurrentState;
int done = 0;
void initialise0(){
	print("State: %d\n", CurrentState);
}
void doSomething1(){
	print("State: %d\n", CurrentState);
	}
}
void doSomething2(){
	print("State: %d\n", CurrentState);
	}
}
void doSomething3(){
	print("State: %d\n", CurrentState);
}
int main(void) {
	while(!done){
		switch(CurrentState){
		case State0:
			initialise0();
			CurrentState = State1;
			break;
		case State1:
			doSomething1();
			if(Test1())
				CurrentState = State3;
			else
				CUrrentState = State2;
			break;
		case State2:
			doSomething1();
			if(Test2())
				CurrentState = State3;
			else
				CurrentState = State0;
			break;
		case State3:
			doSomething3();
			if(!Test3())
				CurrentState = State0;
			printf("State %d\n", CurrentState);
			break;
		}
	}
	return EXIT_SUCCESS;
}
