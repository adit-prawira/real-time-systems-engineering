#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/dispatch.h>

#define ATTACH_POINT "CTC"
#define BUF_SIZE 100
typedef union{
	union{
		_Uint32t sival_int;
		void *sival_ptr;
	};
	_Uint32t dummy; // dummy variable to create space
}_customSignalValue;

typedef struct _CustomPulse{ // Override the standard struct _pulse msg_header_t
	_Uint16t type;
	_Uint16t subtype;
	_Int8t code;
	_Uint8t zero[3]; // same padding used in standard struct _pulse
	_customSignalValue value;
	_Uint8t zero2[2]; // added extra padding for enduring alignment access
	_Int32t serverConnectionId;
}msg_header_t;

typedef struct {
	msg_header_t header;
	int clientId;
	int data;
}messageData;

typedef struct {
	msg_header_t header;
	char buf[BUF_SIZE];
} replyData;

int server();

int main(int argc, char *argv[]){
	puts("Central Traffic Controller Running...");
	int returnedValue = server();
	puts("Central Traffic Controller Terminated");
	return EXIT_SUCCESS;
}

void replyDataInit(replyData *data, _Uint16t type, _Uint16t subtype){
	data->header.type = type;
	data->header.subtype = subtype;
}

int server(){
	name_attach_t *attach;
	messageData message;
	replyData reply;
	replyDataInit(&reply, 0x01, 0x00);

	return EXIT_SUCCESS;
}
